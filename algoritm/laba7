@startuml
title Поток: выбор двух файлов → отправка на сервер → окно с результатами

start
:Главная страница;
/' Выбор двух файлов (docx, txt, pdf) '/
:Пользователь выбирает **Файл A** и **Файл B**;

if (Проверка выбранных типов?) then (Ок)
  note right
    Допустимые расширения:
    - .docx
    - .txt
    - .pdf
  end note
else (Ошибка)
  :Показать сообщение\n"Допустимы только docx/txt/pdf";
  stop
endif

if (Проверка, что выбрано ровно 2 файла?) then (Да)
else (Нет)
  :Показать сообщение\n"Нужно выбрать два файла";
  stop
endif

:Кнопка "Сравнить";
:Отправить POST /api/compare\nmultipart/form-data: {fileA, fileB};

partition "Сервер" {
  :Сохранить во временное хранилище;
  :Определить типы файлов;
  :Извлечь текстовое содержимое\n(DOCX→text, PDF→text, TXT→text);
  :Нормализовать/очистить текст;
  :Сравнение (diff/сходство/метрики);
  :Сформировать результат\n(HTML-просмотр + JSON + файлы diff);
}

:Ответ 200 OK\n{resultId, summary, previewUrl, downloads};

:Открыть окно результатов;
:Показать сводку различий,\nпревью и ссылки на скачивание;

if (Пользователь хочет скачать?) then (Да)
  :Скачать отчёт/разметку diff;
endif

stop
@enduml
